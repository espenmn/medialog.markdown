<html>
<body>
 
 <div id="result"> </div>
<textarea  class="markdown-textarea"
           type="textarea"
           role="markdown"  
           tal:attributes="id string:${view/id};
           name view/name;
           value view/value;
           disabled view/disabled;
           alt view/alt;
           accesskey view/accesskey;
           onselect view/onselect;"   
           tal:content="view/value"/>

<link rel="stylesheet" href="http://ace.jeka.by/assets/font-awesome/4.5.0/css/font-awesome.min.css" />

<script tal:replace="structure view/make_buttons"></script>



<div class="previewbuttons">
<p class="button-field context fa fa-eye" id="mdpreview"></p>
<p class="button-field context fa fa-eye-slash" id="hidepreview"></p>
<p class="button-field context fa fa-arrows-v" id="previewv"></p>
</div>


<style>
.btn-group {display: inline}
.md-header { width: 100%; display: block}
.md-textarea {clear:both;}
.bodytext, #form-widgets-IMarkdownBehavior-bodytext  {float: left; }
.previewbuttons {float: left;}
.previewbuttons,
.fullwidth { background:red; width: 49%; clear: none; display: block; float: left}
#result {overflow: scroll;  }
</style>

<script>
$( "#mdpreview" ).click(function() {
var md = $('#form-widgets-IMarkdownBehavior-bodytext').val();
$.post("render_from_markdown", { markdown: md}, function( data ) {
  $( "#result" ).html( data );
  $('#result').show();
});
});
$( "#hidepreview" ).click(function() {
  $('#result').hide();
});
$( "#previewv" ).click(function() {
  $('#result, .md-textarea, #form-widgets-IMarkdownBehavior-bodytext').toggleClass( 'fullwidth' );
});
</script>   
   
</body>
</html>
 
 
