<html>
<body>
 
 
<textarea  class="markdown-textarea"
           type="textarea"
           rows="50" 
           cols="10" 
           role="markdown"  
           tal:attributes="id string:${view/id};
           name view/name;
           value view/value;
           disabled view/disabled;
           alt view/alt;
           accesskey view/accesskey;
           onselect view/onselect;"   
           tal:content="view/value"/>

   
   <a href="#" class="pat-contentloader" data-pat-contentloader="content:#clexample1;target:#clexample1target;">Load content</a>
   <div id="clexample1target"></div>
   <div id="clexample1" style="display:none"><div tal:content="structure view/render_markdown" /></div>
   
	<link rel="stylesheet" href="http://ace.jeka.by/assets/font-awesome/4.5.0/css/font-awesome.min.css" />
    <!--link rel="stylesheet" href="http://ace.jeka.by/assets/css/ace-skins.min.css" />
	<link rel="stylesheet" href="http://ace.jeka.by/assets/css/ace-rtl.min.css" /-->

 
        
<script>
  require([
  'jquery',
  '++resource++medialog.markdown/ace-extra.min',
  '++resource++medialog.markdown/markdown.min',
  '++resource++medialog.markdown/bootstrap-markdown.min',
  ], function($) {
      $(".markdown-textarea").markdown({
      fullscreen:false,
      language: 'nb',
      enableButtons: 'all',
      additionalButtons: [
    [{
          name: "groupViktig",
          data: [{
            name: "cmdViktig",
            toggle: true, // this param only take effect if you load bootstrap.js
            title: "Viktig",
            icon: "fa fa-exclamation",
            callback: function(e) {
            // Append/remove admonion before the selection
				var chunk, cursor, selected = e.getSelection(),
				  content = e.getContent(),
				  pointer, prevChar;

				if (selected.length === 0) {
				  // Give extra word
				  chunk = e.__localize('tekst');
				} else {
				  chunk = selected.text + '\n';
				}

				// transform selection and set the cursor into chunked text
				if ((pointer = 4, content.substr(selected.start - pointer, pointer) === '!!! viktig "Merk"\n    ') ||
				  (pointer = 3, content.substr(selected.start - pointer, pointer) === '!!! viktig "Merk"\n    ')) {
				  e.setSelection(selected.start - pointer, selected.end);
				  e.replaceSelection(chunk);
				  cursor = selected.start - pointer;
				} else {
				  // Empty string before element
				  e.replaceSelection('!!! viktig "Merk"\n    ' + chunk);
				  cursor = selected.start + 22;
				}

                // Set the cursor
                e.setSelection(cursor, cursor + chunk.length);
			}
          }]
    },
    {
          name: "groupNote",
          data: [{
            name: "cmdNote",
            toggle: true, // this param only take effect if you load bootstrap.js
            title: "Note",
            icon: "fa fa-info",
            callback: function(e){
              // Replace selection with text
              

              // Give random drink
              chunk = '\n!!! note "Merk" \n    Tekst her.\n\n'

              // transform selection and set the cursor into chunked text
              e.replaceSelection(chunk)
              cursor = selected.start

              // Set the cursor
              e.setSelection(cursor,cursor+chunk.length)
            }
          }]
    },
    {
          name: "groupEksempel",
          data: [{
            name: "cmdEksempel",
            toggle: true, // this param only take effect if you load bootstrap.js
            title: "Eksempel",
            icon: "fa fa-flag",
            callback: function(e){
              // Replace selection with text
              

              // Give random drink
              chunk = '\n!!! eksempel "Eksempel" \n    Tekst her.\n\n'

              // transform selection and set the cursor into chunked text
              e.replaceSelection(chunk)
              cursor = selected.start

              // Set the cursor
              e.setSelection(cursor,cursor+chunk.length)
            }
          }]
    },
    {
          name: "groupFormel",
          data: [{
            name: "cmdFormel",
            toggle: true, // this param only take effect if you load bootstrap.js
            title: "Formel",
            icon: "fa fa-plus-circle",
            callback: function(e){
              // Replace selection with text
              

              // Give random drink
              chunk = '\n!!! formel "Formel" \n    Formel her.\n\n'

              // transform selection and set the cursor into chunked text
              e.replaceSelection(chunk)
              cursor = selected.start

              // Set the cursor
              e.setSelection(cursor,cursor+chunk.length)
            }
          }]
    },
    {
          name: "groupOppsummering",
          data: [{
            name: "cmdOppsummering",
            toggle: true, // this param only take effect if you load bootstrap.js
            title: "Oppsummering",
            icon: "fa fa-filter",
            callback: function(e){
              // Replace selection with text
              

              // Give random drink
              chunk = '\n!!! oppsummering "Oppsummering" \n    Formel her.\n\n'

              // transform selection and set the cursor into chunked text
              e.beforeSelection(chunk)
              cursor = selected.start

              // Set the cursor
              e.setSelection(cursor,cursor+chunk.length)
            }
          }]
    },
    {
          name: "groupUndring",
          data: [{
            name: "cmdNote",
            toggle: true, // this param only take effect if you load bootstrap.js
            title: "Undring",
            icon: "fa fa-question",
            callback: function(e){
              // Replace selection with text
              

              // Give random drink
              chunk = '\n!!! undring "Hvorfor?" \n    Tekst her.\n\n'

              // transform selection and set the cursor into chunked text
              e.replaceSelection(chunk)
              cursor = selected.start

              // Set the cursor
              e.setSelection(cursor,cursor+chunk.length)
            }
          }]
    }]
  ]
})
  });
</script>

<style>
.btn-group {float: left;}
</style>

</body>
</html>
